<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>회원가입</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.9.0/dist/summernote.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.9.0/dist/summernote.min.js"></script>
    <link rel='stylesheet' type='text/css' media='screen' href='css/signin.css'>
    <link rel='stylesheet' type='text/css' media='screen' href='css/header.css'>
    <link rel='stylesheet' type='text/css' media='screen' href='css/footer.css'>

</head>

<body>
    <!-- ========= body 상단에 삽입할 것 ========== -->
    <div id="header"> <!-- 헤더 -->
        <div id="header_wrap"> <!-- 헤더 wrap -->
            <div id="header_logo">
                <a href="/list.html">무비존</a>
            </div>
            <div id="header_content">
                <ul id="header_top">
                    <li><a href="signin.html">회원가입</a></li>
                    <li><a href="login.html">로그인</a></li>
                    <li><a href="#" id="logoutBtn" style="display: none;">로그아웃</a></li>
                </ul>
                <ul id="header_bottom">
                    <li id="userWelcome">회원가입 해주세요</li>
                </ul>
            </div> <!-- 헤더 wrap 끝 -->
        </div> <!-- 헤더 끝 -->
    </div>
    <div id="main">
        <a href="#"><img id="cgv2" src="" /></a><br />
        <h1>회원가입</h1>
        <input id="uidInput" type="text" placeholder="생성할 ID를 입력해주세요" /><br />
        <input id="pwdInput" type="password" placeholder="생성할 비밀번호를 입력해주세요" /><br />
        <label><input id="isAdminInput" type="checkbox" />관리자 권한으로 회원가입</label><br />
        <button id="userpageBtn" onclick="userpage()">회원가입완료</button>

        <ul>
            <li>
                <a href="/login.html">회원이신가요?<span style="color: blue; margin-left: 5px;">로그인</span>하기</a>
            </li>
        </ul>
    </div>


    <script src='/js/signin.js'></script>


    <script>
        window.onload = function () {
            const uid = localStorage.getItem("uidId");
            const isAdmin = localStorage.getItem("isAdmin") == "true"; //문자열 비교 필요

            const loginLink = document.querySelector('a[href="login.html"]');
            const signupLink = document.querySelector('a[href="signin.html"]');
            const logoutBtn = document.getElementById("logoutBtn");
            const userWelcome = document.getElementById("userWelcome");

            if (uid) {
                if (loginLink) loginLink.style.display = "none";
                if (signupLink) signupLink.style.display = "none";
                logoutBtn.style.display = "inline";

                //관리자 여부에 따른 문구 변경
                userWelcome.textContent = isAdmin
                    ? `관리자 ${uid}님 환영합니다!`
                    : `${uid}님 환영합니다!`;
            } else {
                if (loginLink) loginLink.style.display = "inline";
                if (signupLink) signupLink.style.display = "inline";
                logoutBtn.style.display = "none";
                userWelcome.textContent = "로그인 해주세요";
            }

            logoutBtn.onclick = function () {
                localStorage.removeItem("uidId");
                localStorage.removeItem("isAdmin");
                alert("로그아웃 되었습니다.");
                location.href = "/login.html";
            };
        };
    </script>


</body>

</html>